C51 COMPILER V9.54   MAIN                                                                  08/23/2025 18:20:21 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\Learning Programs\kiel5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT
                    -(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "LCD1602.h"
   4          #include "DS18B20.h"
   5          #include "AT2402.h"
   6          #include "I2C.h"
   7          #include "Timer0_Init.h"
   8          #include "IndeKey.h"
   9          #include "Buzzer.h"
  10          
  11          float T,TShow;
  12          char TLow,THigh;
  13          unsigned KeyNum;
  14          unsigned char WarnFlag=0;
  15          
  16          void main(){
  17   1              THigh=AT24C02_ReadByte(0);
  18   1              TLow=AT24C02_ReadByte(1);
  19   1              if(THigh>125 || TLow<-55 || TLow>=THigh){TLow=-5;THigh=20;}
  20   1              Timer0_Init();
  21   1              DS18B20_ConvertT();
  22   1              Delay(1000);
  23   1              LCD_Init();
  24   1              LCD_ShowString(1,1,"T:");
  25   1              LCD_ShowString(2,1,"TH:");
  26   1              LCD_ShowString(2,9,"TL:");
  27   1              //LCD_ShowString(1,1,"Temperature:");
  28   1              while(1){
  29   2                      KeyNum=IndeKey();
  30   2                      /*温度读取及显示*/
  31   2                      DS18B20_ConvertT();
  32   2                      T=DS18B20_ReadT();
  33   2                      if(T<0){
  34   3                              LCD_ShowChar(1,3,'-');
  35   3                              TShow=-T;
  36   3                      }
  37   2                      else{
  38   3                              LCD_ShowChar(1,3,'+');
  39   3                              TShow=T;
  40   3                      }
  41   2                              
  42   2                      LCD_ShowNum(1,4,TShow,3);
  43   2                      LCD_ShowChar(1,7,'.');
  44   2                      LCD_ShowNum(1,8,(unsigned long)(TShow*100)%100,2);
  45   2                      /*阈值判断及显示*/
  46   2                      LCD_ShowSignedNum(2,4,THigh,3);
  47   2                      LCD_ShowSignedNum(2,12,TLow,3);
  48   2                      if(KeyNum){
  49   3                              switch(KeyNum){
  50   4                                      case 1:THigh++;Buzzer_tms(100);if(THigh>125)THigh=125;break;
  51   4                                      case 2:THigh--;Buzzer_tms(100);if(THigh<=TLow)THigh++;break;
  52   4                                      case 3:TLow++;Buzzer_tms(100);if(TLow>=THigh)TLow--;break;
  53   4                                      case 4:TLow--;Buzzer_tms(100);if(TLow<-55)TLow=-55;break;
  54   4                                      default:break;
C51 COMPILER V9.54   MAIN                                                                  08/23/2025 18:20:21 PAGE 2   

  55   4                                      AT24C02_WriteByte(0,THigh);
  56   4                                      Delay(8);
  57   4                                      AT24C02_WriteByte(1,TLow);                              
  58   4                              }
  59   3                              if(T>THigh){
  60   4                                      LCD_ShowString(1,13,"OV:H");
  61   4                                      WarnFlag=1;
  62   4                              }                       
  63   3                              else if(T<TLow){
  64   4                                      LCD_ShowString(1,13,"OV:L");                            
  65   4                                      WarnFlag=1;
  66   4                              }
  67   3                              else{
  68   4                                      LCD_ShowString(1,13,"    ");    
  69   4                                      WarnFlag=0;                                             
  70   4                              }
  71   3                      }
  72   2              }
  73   1      }
  74          
  75          
  76          
  77          void Timer0_Routine() interrupt 1{
  78   1              static unsigned int T0Count1,T0Count2,T0Count3;
  79   1              TL0=0x18;
  80   1              TH0=0xFC;
  81   1              T0Count1++;
  82   1              if(T0Count1>=20){
  83   2                      T0Count1=0;
  84   2                      Key_Loop();
*** WARNING C206 IN LINE 84 OF main.c: 'Key_Loop': missing function-prototype
  85   2              }       
  86   1              T0Count2++;     
  87   1              //T0Count2++;
  88   1              //if(T0Count2>=2){
  89   1              //      T0Count2=0;
  90   1              //      Nixie_Loop();
  91   1              //}     
  92   1              //T0Count3++;
  93   1              //if(T0Count3>=10){
  94   1              //      T0Count3=0;
  95   1              //      Sec_Loop();
  96   1              //}
  97   1      }
*** WARNING C280 IN LINE 78 OF main.c: 'T0Count3': unreferenced local variable
*** WARNING C294 IN LINE 55 OF main.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    611    ----
   CONSTANT SIZE    =     26    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     19    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  3 WARNING(S),  0 ERROR(S)
